<div class="row" [class.d-flex]="!hasAskedForResults">
  <div
    class="col-md-4 col-lg-3 mb-3 px-3 px-md-0"
    [class.mx-auto]="!hasAskedForResults"
    [class.px-md-3]="hasAskedForResults"
  >
    <div class="options-container">
      <h1 class="text-center mb-3">Find people in history</h1>
      <dbw-search-options
        [requestedQuery]="requestedQuery"
        (queryChanged)="this.searchQueryChanged.next($event)"
        (submitted)="this.searchOptionsSubmitted.next()"
      ></dbw-search-options>
      <p class="mt-3 text-center d-none d-sm-block">
        <a [routerLink]="['/about']" fragment="download">Download the whole dataset here.</a>
      </p>
    </div>
  </div>
  <div id="results" class="col-md-8 col-lg-9" *ngIf="results || hasAskedForResults">
    <div class="results-header mb-2">
      <h3 *ngIf="results">Results</h3>
      <span *ngIf="results && results.persons.length > 0 && !waitingForResults"
        >Showing results {{ results.pageNumber * results.maxSliceSize + 1 }} -
        {{ results.pageNumber * results.maxSliceSize + results.persons.length }} (page {{ results.pageNumber + 1 }}),
        sorted by {{ results.sort.variable | sortVariable }} {{ results.sort.direction }}
      </span>
      <span *ngIf="waitingForResults" class="loading-label text-primary">Please wait...</span>
      <dbw-search-results-page-buttons
        *ngIf="results && results.persons.length > 0 && (results.hasPreviousPage || results.hasNextPage)"
        [results]="results"
        [disabled]="waitingForResults"
        (previousPageButtonClicked)="onPageButtonClick(-1)"
        (nextPageButtonClicked)="onPageButtonClick(+1)"
        class="ms-auto"
      ></dbw-search-results-page-buttons>
    </div>
    <dbw-search-results
      [results]="results"
      (sortStateChanged)="onSortStateChanged($event)"
      [class.blurred]="waitingForResults"
    ></dbw-search-results>
  </div>
</div>
